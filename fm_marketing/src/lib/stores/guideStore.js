// src/lib/stores/guideStore.js
import { writable } from 'svelte/store';

function createGuideStore() {
  const { subscribe, set, update } = writable({
    guides: [],
    faqs: [],
    loading: false,
    error: null
  });

  // 더미 이용 가이드 데이터
  const dummyGuides = [
    {
      id: 1,
      title: '체험단 신청 방법',
      content: `
        <h2>체험단 신청 방법</h2>
        <p>FM마케팅에서 체험단에 신청하는 방법을 안내해드립니다.</p>
        
        <h3>1. 회원가입 및 로그인</h3>
        <p>FM마케팅에 회원가입 후 로그인합니다. 회원가입 시 기본 정보 외에도 블로그, 인스타그램 등 SNS 정보를 추가하면 체험단 선정에 도움이 됩니다.</p>
        
        <h3>2. 체험단 목록 확인</h3>
        <p>메인 페이지 또는 '체험단 검색' 메뉴에서 현재 모집 중인 체험단 목록을 확인할 수 있습니다. 원하는 지역이나 카테고리로 필터링하여 검색할 수 있습니다.</p>
        
        <h3>3. 체험단 상세 정보 확인</h3>
        <p>관심 있는 체험단을 클릭하여 상세 정보를 확인합니다. 체험 장소, 기간, 미션 내용, 제공 혜택 등을 꼼꼼히 확인하세요.</p>
        
        <h3>4. 신청서 작성</h3>
        <p>체험단 참여를 원하면 '신청하기' 버튼을 클릭하여 신청서를 작성합니다. 신청 이유, 블로그 주소, 이전 체험 활동 경험 등을 상세하게 작성하면 선정 확률이 높아집니다.</p>
        
        <h3>5. 선정 결과 확인</h3>
        <p>신청 마감 후 3일 이내에 선정 결과가 발표됩니다. 마이페이지에서 선정 결과를 확인할 수 있으며, 선정될 경우 SMS와 이메일로도 안내됩니다.</p>
      `,
      category: '기본 가이드',
      thumbnail: '/images/guides/application_guide.jpg',
      createdAt: '2025-01-15T10:00:00'
    },
    {
      id: 2,
      title: '체험단 활동 인증 방법',
      content: `
        <h2>체험단 활동 인증 방법</h2>
        <p>FM마케팅 체험단으로 선정된 후 활동 인증 방법을 안내해드립니다.</p>
        
        <h3>1. 체험 진행</h3>
        <p>선정된 체험단은 정해진 기간 내에 체험을 진행합니다. 체험 시 다양한 사진과 영상을 촬영하는 것이 좋습니다.</p>
        
        <h3>2. 리뷰 작성</h3>
        <p>체험 후 48시간 이내에 지정된 플랫폼(블로그, 인스타그램 등)에 리뷰를 작성합니다. 리뷰 작성 시 아래 사항을 준수해주세요:</p>
        <ul>
          <li>FM마케팅을 통한 체험단 활동임을 명시</li>
          <li>최소 5장 이상의 사진 첨부</li>
          <li>장점과 단점을 균형있게 서술</li>
          <li>지정된 키워드 포함</li>
        </ul>
        
        <h3>3. 인증 링크 등록</h3>
        <p>리뷰 작성 후 마이페이지 > 체험단 활동 > 해당 체험단 항목에서 '인증하기' 버튼을 클릭하여 리뷰 URL을 등록합니다.</p>
        
        <h3>4. 승인 과정</h3>
        <p>등록된 리뷰는 담당자 확인 후 24시간 이내에 승인됩니다. 가이드라인을 준수하지 않은 경우 수정 요청이 있을 수 있습니다.</p>
        
        <h3>5. 포인트 지급</h3>
        <p>리뷰가 승인되면 해당 체험단 활동에 대한 포인트가 지급됩니다. 포인트는 추후 다른 체험단 활동이나 현금으로 환급 가능합니다.</p>
      `,
      category: '기본 가이드',
      thumbnail: '/images/guides/verification_guide.jpg',
      createdAt: '2025-01-20T14:30:00'
    },
    {
      id: 3,
      title: '포인트 적립 및 사용 안내',
      content: `
        <h2>포인트 적립 및 사용 안내</h2>
        <p>FM마케팅의 포인트 시스템에 대해 안내해드립니다.</p>
        
        <h3>1. 포인트 적립 방법</h3>
        <p>다음과 같은 활동을 통해 포인트를 적립할 수 있습니다:</p>
        <ul>
          <li>회원가입: 1,000 포인트</li>
          <li>로그인(일일): 10 포인트</li>
          <li>체험단 활동 완료: 체험단별 상이 (5,000~50,000 포인트)</li>
          <li>커뮤니티 게시글 작성: 50 포인트</li>
          <li>댓글 작성: 10 포인트</li>
          <li>이벤트 참여: 이벤트별 상이</li>
        </ul>
        
        <h3>2. 포인트 사용 방법</h3>
        <p>적립된 포인트는 다음과 같은 방법으로 사용할 수 있습니다:</p>
        <ul>
          <li>유료 체험단 신청 시 사용</li>
          <li>현금 환급 (1,000 포인트 = 1,000원, 최소 환급 가능 포인트: 10,000 포인트)</li>
          <li>쇼핑몰 포인트로 전환</li>
        </ul>
        
        <h3>3. 포인트 유효기간</h3>
        <p>포인트의 유효기간은 적립일로부터 1년입니다. 유효기간이 임박한 포인트는 마이페이지에서 확인할 수 있습니다.</p>
        
        <h3>4. 포인트 확인 방법</h3>
        <p>적립된 포인트는 웹사이트 상단 또는 마이페이지 > 포인트 내역에서 확인할 수 있습니다.</p>
      `,
      category: '포인트/결제',
      thumbnail: '/images/guides/point_guide.jpg',
      createdAt: '2025-02-05T09:00:00'
    },
    {
      id: 4,
      title: '체험단 선정 기준',
      content: `
        <h2>체험단 선정 기준</h2>
        <p>FM마케팅의 체험단 선정 기준에 대해 안내해드립니다.</p>
        
        <h3>1. 기본 선정 기준</h3>
        <p>체험단 선정 시 다음과 같은 기준으로 평가합니다:</p>
        <ul>
          <li>블로그, 인스타그램 등 SNS 활동 현황</li>
          <li>이전 체험단 활동 성실도</li>
          <li>신청서 작성 내용의 충실도</li>
          <li>지원자의 특성과 체험단의 적합성</li>
        </ul>
        
        <h3>2. 블로그 체험단 선정 기준</h3>
        <p>블로그 체험단의 경우 다음 사항을 추가로 고려합니다:</p>
        <ul>
          <li>블로그 방문자 수 및 조회수</li>
          <li>블로그 포스팅의 질과 전문성</li>
          <li>블로그 활동 기간 및 포스팅 주기</li>
        </ul>
        
        <h3>3. SNS 체험단 선정 기준</h3>
        <p>인스타그램, 유튜브 등 SNS 체험단의 경우 다음 사항을 추가로 고려합니다:</p>
        <ul>
          <li>팔로워 수 및 팔로워의 활동성</li>
          <li>콘텐츠의 퀄리티 및 일관성</li>
          <li>해시태그 활용도 및 콘텐츠 확산력</li>
        </ul>
        
        <h3>4. 우대사항</h3>
        <p>다음과 같은 경우 체험단 선정 시 우대될 수 있습니다:</p>
        <ul>
          <li>이전 체험단 활동에서 우수한 리뷰를 작성한 경우</li>
          <li>관련 분야에 전문성이 있는 경우 (예: 요리사, 뷰티 전문가 등)</li>
          <li>체험 지역 근처에 거주하는 경우</li>
        </ul>
        
        <h3>5. 선정 제외 사항</h3>
        <p>다음과 같은 경우 체험단 선정에서 제외될 수 있습니다:</p>
        <ul>
          <li>이전 체험단 활동 시 미션을 수행하지 않은 경우</li>
          <li>허위 정보를 제공한 경우</li>
          <li>동일 기간 내 다수의 체험단에 중복 신청한 경우</li>
        </ul>
      `,
      category: '체험단 정보',
      thumbnail: '/images/guides/selection_guide.jpg',
      createdAt: '2025-02-10T11:30:00'
    },
    {
      id: 5,
      title: '리뷰 작성 가이드',
      content: `
        <h2>리뷰 작성 가이드</h2>
        <p>효과적인 체험단 리뷰 작성 방법을 안내해드립니다.</p>
        
        <h3>1. 기본 구성</h3>
        <p>효과적인 리뷰는 다음과 같은 구성으로 작성하는 것이 좋습니다:</p>
        <ul>
          <li>체험 장소/제품 소개 및 외관</li>
          <li>체험 과정 상세 설명</li>
          <li>장점과 단점</li>
          <li>추천 대상 및 이유</li>
          <li>전체적인 평가 및 결론</li>
        </ul>
        
        <h3>2. 사진 촬영 팁</h3>
        <p>리뷰에 사용할 사진 촬영 시 다음 사항을 고려하세요:</p>
        <ul>
          <li>자연광을 활용하여 밝고 선명하게 촬영</li>
          <li>다양한 각도에서 촬영</li>
          <li>제품의 경우 패키지, 성분표, 사용감 등 다각도로 촬영</li>
          <li>음식점의 경우 외관, 내부, 메뉴판, 음식 등 순차적으로 촬영</li>
        </ul>
        
        <h3>3. 리뷰 작성 시 주의사항</h3>
        <ul>
          <li>체험단을 통해 경험했음을 명시 (예: "이 글은 FM마케팅 체험단으로 참여한 후기입니다.")</li>
          <li>과장된 표현이나 허위 정보 작성 금지</li>
          <li>부정적인 면도 객관적으로 언급</li>
          <li>맞춤법과 문법 확인</li>
          <li>지정된 키워드 자연스럽게 포함</li>
        </ul>
        
        <h3>4. 플랫폼별 작성 팁</h3>
        <p><strong>블로그</strong></p>
        <ul>
          <li>소제목을 활용하여 가독성 높이기</li>
          <li>글자 크기, 색상 등을 활용하여 중요 내용 강조</li>
          <li>테이블 활용하여 정보 정리</li>
        </ul>
        
        <p><strong>인스타그램</strong></p>
        <ul>
          <li>대표 사진을 첫 장에 배치</li>
          <li>해시태그 전략적 활용 (지정 해시태그 + 관련 해시태그 10-15개 추가)</li>
          <li>위치 정보 태그 추가</li>
        </ul>
        
        <h3>5. 우수 리뷰 사례</h3>
        <p>FM마케팅에서 선정한 우수 리뷰 사례는 '커뮤니티 > 우수 리뷰' 게시판에서 확인할 수 있습니다. 참고하여 퀄리티 높은 리뷰를 작성해보세요!</p>
      `,
      category: '체험단 정보',
      thumbnail: '/images/guides/review_guide.jpg',
      createdAt: '2025-02-15T16:45:00'
    }
  ];

  // 더미 FAQ 데이터
  const dummyFaqs = [
    {
      id: 1,
      question: '체험단 신청은 어떻게 하나요?',
      answer: '메인 페이지나 체험단 검색 메뉴에서 원하는 체험단을 찾아 상세 페이지로 이동한 후 \'신청하기\' 버튼을 클릭하여 신청할 수 있습니다. 신청 시 신청 이유와 SNS 정보 등을 상세하게 작성하면 선정 확률이 높아집니다.',
      category: '체험단 신청',
      createdAt: '2025-01-10T10:00:00'
    },
    {
      id: 2,
      question: '체험단 선정 결과는 어떻게 확인하나요?',
      answer: '체험단 신청 마감 후 보통 3일 이내에 선정 결과가 발표됩니다. 마이페이지 > 체험단 활동 내역에서 선정 결과를 확인할 수 있으며, 선정된 경우 등록된 연락처로 SMS와 이메일 알림도 발송됩니다.',
      category: '체험단 신청',
      createdAt: '2025-01-10T10:05:00'
    },
    {
      id: 3,
      question: '체험단 활동 후 인증은 어떻게 하나요?',
      answer: '체험 완료 후 지정된 플랫폼(블로그, 인스타그램 등)에 리뷰를 작성한 다음, 마이페이지 > 체험단 활동 > 해당 체험단 항목에서 \'인증하기\' 버튼을 클릭하여 리뷰 URL을 등록하면 됩니다.',
      category: '체험단 활동',
      createdAt: '2025-01-10T10:10:00'
    },
    {
      id: 4,
      question: '포인트는 어떻게 적립되나요?',
      answer: '회원가입, 로그인, 체험단 활동 완료, 커뮤니티 활동 등 다양한 방법으로 포인트를 적립할 수 있습니다. 적립된 포인트는 마이페이지 > 포인트 내역에서 확인할 수 있습니다.',
      category: '포인트/결제',
      createdAt: '2025-01-10T10:15:00'
    },
    {
      id: 5,
      question: '적립된 포인트는 어떻게 사용하나요?',
      answer: '적립된 포인트는 유료 체험단 신청 시 사용하거나, 10,000 포인트 이상부터 현금으로 환급 신청이 가능합니다. 환급 신청은 마이페이지 > 포인트 > 환급 신청에서 할 수 있습니다.',
      category: '포인트/결제',
      createdAt: '2025-01-10T10:20:00'
    },
    {
      id: 6,
      question: '체험단 신청 후 취소할 수 있나요?',
      answer: '체험단 신청 마감 전까지는 마이페이지 > 체험단 신청 내역에서 신청을 취소할 수 있습니다. 단, 이미 선정된 체험단을 취소하는 경우 패널티가 부과될 수 있으니 신중하게 신청해주세요.',
      category: '체험단 신청',
      createdAt: '2025-01-10T10:25:00'
    },
    {
      id: 7,
      question: '체험단으로 선정되면 어떤 과정으로 진행되나요?',
      answer: '체험단으로 선정되면 SMS와 이메일로 안내를 받게 됩니다. 안내에 따라 체험 일정을 확정하고, 정해진 기간 내에 체험을 진행한 후 48시간 이내에 리뷰를 작성하여 인증하면 됩니다.',
      category: '체험단 활동',
      createdAt: '2025-01-10T10:30:00'
    },
    {
      id: 8,
      question: '리뷰 작성 시 필수로 포함해야 할 내용이 있나요?',
      answer: '리뷰 작성 시 \'FM마케팅 체험단으로 참여했음\'을 명시해야 하며, 체험단별로 지정된 키워드가 있는 경우 이를 포함해야 합니다. 또한, 최소 5장 이상의 사진을 첨부하고 장점과 단점을 균형있게 작성하는 것을 권장합니다.',
      category: '체험단 활동',
      createdAt: '2025-01-10T10:35:00'
    },
    {
      id: 9,
      question: '회원 정보는 어떻게 변경하나요?',
      answer: '로그인 후 마이페이지 > 회원정보 수정에서 개인정보, 연락처, SNS 정보 등을 변경할 수 있습니다. 단, 아이디와 이름은 변경이 불가능합니다.',
      category: '회원 정보',
      createdAt: '2025-01-10T10:40:00'
    },
    {
      id: 10,
      question: '체험단 신청 시 자주 거절되는 이유는 무엇인가요?',
      answer: '체험단 신청이 거절되는 주요 이유로는 1) SNS 활동이 미비한 경우, 2) 신청서 작성이 부실한 경우, 3) 이전 체험단 활동에서 미션을 완료하지 않은 경우, 4) 동일 기간에 여러 체험단에 중복 선정된 경우 등이 있습니다.',
      category: '체험단 신청',
      createdAt: '2025-01-10T10:45:00'
    }
  ];

  return {
    subscribe,
    
    // 가이드 목록 불러오기
    fetchGuides: (category = null) => {
      update(state => ({ ...state, loading: true }));
      
      return new Promise((resolve) => {
        setTimeout(() => {
          let filteredGuides = [...dummyGuides];
          
          if (category) {
            filteredGuides = filteredGuides.filter(guide => guide.category === category);
          }
          
          update(state => ({
            ...state,
            guides: filteredGuides,
            loading: false
          }));
          
          resolve(filteredGuides);
        }, 500);
      });
    },
    
    // FAQ 목록 불러오기
    fetchFaqs: (category = null) => {
      update(state => ({ ...state, loading: true }));
      
      return new Promise((resolve) => {
        setTimeout(() => {
          let filteredFaqs = [...dummyFaqs];
          
          if (category) {
            filteredFaqs = filteredFaqs.filter(faq => faq.category === category);
          }
          
          update(state => ({
            ...state,
            faqs: filteredFaqs,
            loading: false
          }));
          
          resolve(filteredFaqs);
        }, 500);
      });
    },
    
    // 가이드 상세 조회
    getGuideById: (id) => {
      return new Promise((resolve) => {
        setTimeout(() => {
          const guide = dummyGuides.find(g => g.id === parseInt(id));
          resolve(guide);
        }, 300);
      });
    }
  };
}

export const guideStore = createGuideStore();
